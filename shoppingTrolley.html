<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>我的购物车 | 一加官网</title>
		<link rel="shortcut icon" href="img/ico.ico" />
		<link rel="stylesheet" type="text/css" href="css/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<title>购物车</title>
	</head>

	<body>
		<div class="header">
			<div class="nonecd"><span class="iconfont icon-cd"></span></div>
			<a href="index.html"><img class="logo" src="img/logo1.png"></a>
			<div class="navBox">
				<a href="#" class="nav_7t nav">8 系列 <img src="img/news.png" alt=""></a>
				<a href="#" class="nav_7 nav">7 系列</a>
				<a href="store.html" target="_blank" class="nav_sc nav">商城</a>
				<a href="#" class="_nav">品牌</a>
				<a href="#" class="_nav">服务</a>
				<a href="#" class="_nav">论坛</a>
				<a href="#" class="_nav">零售店</a>
			</div>
			<div class="header_icon">
				<a href="register.html" target="_blank"><span class="iconfont icon-dl"></span></a>
				<a href="store.html" target="_blank"><span class="iconfont icon-gwd"></span></a>
				<a href="#"><span class="iconfont icon-ss"></span></a>
			</div>
		</div>

		<!-- header_navBox -->
		<div class="header_navBox">
			<div class="header_navB1">
				<ul>
					<li><a href="#">订单</a></li>
					<li><a href="#">账户</a></li>
					<li><a href="#">推荐有礼</a></li>
					<li><a href="register.html" target="_blank">登录</a></li>
				</ul>
			</div>
			<div class="header_navB2">
				<a href="store.html"><img src="img/gwc.jpg"></a>
				<br><br>
				<hr>
				<p class="p_span">
					<a href="store.html" class="p3">去购物</a>
					<a href="store.html"><span>去购物</span></a>
				</p>
			</div>
		</div>

		<!-- navcontentBox -->
		<!-- navcontentBox -->
		<div class="navcontentBox">
			<div class="navBox_1">
				<ul>
					<a href="#">
						<li><span class="iconfont icon-sj3"></span><br><br>OnePlus 8</li>
					</a>
					<a href="#">
						<li><span class="iconfont icon-sj3"></span><br><br>OnePlus 8 Pro</li>
					</a>
				</ul>
			</div>
			<div class="navBox_1">
				<ul>
					<a href="#">
						<li><span class="iconfont icon-sj3"></span><br><br>OnePlus 7T</li>
					</a>
					<a href="#">
						<li><span class="iconfont icon-sj3"></span><br><br>OnePlus 7T Pro</li>
					</a>
				</ul>
			</div>
			<div class="navBox_1">
				<ul>
					<a href="#">
						<li><span class="iconfont icon-sj3"></span><br><br>OnePlus 7P</li>
					</a>
					<a href="#">
						<li><span class="iconfont icon-sj3"></span><br><br>OnePlus 7</li>
					</a>
				</ul>
			</div>
			<div class="navBox_1">
				<ul>
					<a href="#">
						<li><span class="iconfont icon-sj3"></span><br><br>手机</li>
					</a>
					<a href="#">
						<li><span class="iconfont icon-erji"></span><br><br>耳机</li>
					</a>
					<a href="#">
						<li><span class="iconfont icon-sjk1"></span><br><br>壳/膜</li>
					</a>
					<a href="#">
						<li><span class="iconfont icon-cdq"></span><br><br>适配器/数据线</li>
					</a>
					<a href="#">
						<li><span class="iconfont icon-cdq"></span><br><br>套装</li>
					</a>
					<a href="#">
						<li><span class="iconfont icon-sb1"></span><br><br>生活馆</li>
					</a>
				</ul>

			</div>
		</div>
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<div id="shoppbox"></div>
		<div id="shoping">
			<p>购物车</p>
		</div>

		<div class="shop_car">
			<div class="shop_car_list"></div>

			<div class="no_goods">
				购物车空空如也
			</div>

			<div class="shop_car_list_total">
				<div class="shop_sp1">
					<div class="zongjia">总价<p>￥<span id="goods-totla-prices">0</span></p>
					</div>
					<p>支持免邮</p>
					<p class="shop_span shop_span_a1">
						<a href="store.html" class="p3">继续购物</a>
						<a href="store.html"><span>继续购物</span></a>
					</p>
					<p class="shop_span shop_span_a2">
						<a class="p3">去结算</a>
						<a><span></span></a>
					</p>
					<p class="yhj_p">请在下一步使用优惠卷</p>
				</div>
				<div class="shop_sp2">
					已选择<span id="goods-total-nums">0</span>件商品
				</div>
			</div>
		</div>

		<!-- 你可能喜欢 -->
		<div class="goods_p_1">
			你可能喜欢
		</div>
		<div class="goods_list"></div>
		<div class="zhiffs">
			<button type="button">x</button>
			<img src="img/512403141.png" >
			
		</div>
		<div class="zzc"></div>
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->
		<!-- ------------------------------------------------------- -->


		<!-- afterSale -->
		<div class="afterSale">
			<div>
				<a href="https://support-cn.oneplus.com/app/answers/detail/a_id/33" target="_blank">
					<img src="img/7.svg">
				</a>
				<p>
					<a href="https://support-cn.oneplus.com/app/answers/detail/a_id/33" target="_blank">
						7天无理由退货
					</a>
				</p>
			</div>
			<div>
				<a href="https://support-cn.oneplus.com/app/answers/detail/a_id/33" target="_blank">
					<img src="img/15.svg">
				</a>
				<p>
					<a href="https://support-cn.oneplus.com/app/answers/detail/a_id/33" target="_blank">
						15天退货保障
					</a>
				</p>
			</div>
			<div>
				<a href="https://support-cn.oneplus.com/app/answers/detail/a_id/33" target="_blank">
					<img src="img/30.svg">
				</a>
				<p>
					<a href="https://support-cn.oneplus.com/app/answers/detail/a_id/33" target="_blank">
						30天换货保障
					</a>
				</p>
			</div>
			<div>
				<a href="https://support-cn.oneplus.com/app/answers/detail/a_id/33" target="_blank">
					<img src="img/libao.svg">
				</a>
				<p>
					<a href="https://support-cn.oneplus.com/app/answers/detail/a_id/33" target="_blank">
						99全场包邮
					</a>
				</p>
			</div>
		</div>

		<!-- footer -->
		<div class="footer">
			<div class="footer-box1">
				<ul>
					<li class="box1-li">一加产品</li>
					<li><a href="#">OnePlus 8 Pro</a></li>
					<li><a href="#">OnePlus 8</a></li>
					<li><a href="#">OnePlus 7T Pro</a></li>
					<li><a href="#">OnePlus 7T</a></li>
					<li><a href="#">OnePlus 7T Pro</a></li>
				</ul>
				<ul>
					<li class="box1-li">热门活动</li>
					<li><a href="#">推荐有礼</a></li>
					<li><a href="#">以旧换新</a></li>
					<li><a href="#">Shot on OnePlus</a></li>
					<li><a href="#">邀请码购买</a></li>
					<li><a href="#">教育优惠</a></li>
				</ul>
				<ul>
					<li class="box1-li">关于一加</li>
					<li><a href="#">了解一加</a></li>
					<li><a href="#">加入一加</a></li>
					<li><a href="#">H2OS</a></li>
					<li><a href="#">云服务</a></li>
					<li><a href="#">预置应用公示</a></li>
				</ul>
				<ul>
					<li class="box1-li">服务支持</li>
					<li><a href="#">购买帮助</a></li>
					<li><a href="#">用户手册</a></li>
					<li><a href="#">寄修服务</a></li>
					<li><a href="#">服务中心</a></li>
					<li><a href="#">联系我们</a></li>
				</ul>
				<div class="relation">
					<p class="dh">电话:400-888-1111</p>
					<p class="p_span pf_span">
						<a href="http://www.sobot.com/chat/pc/index.html?sysNum=8b1ffba807764bc3bf2da878e5bb3df6" target="_blank" class="a3">在线客服</a>
						<a href="http://www.sobot.com/chat/pc/index.html?sysNum=8b1ffba807764bc3bf2da878e5bb3df6" target="_blank"><span>在线客服</span></a>
					</p>
					<p class="sj">周一至周日 9:00 - 22:00</p>
					<img class="imgs imgss" src="img/vx.png">
					<img class="iimgss" src="img/ewm.jpg">
					<a href="https://weibo.com/oneplusmobile?is_hot=1" target="_blank"><img class="imgs" src="img/WB.png"></a>
				</div>
			</div>

			<!-- china -->
			<div class="china">
				<img src="img/china.png"><span>中国大陆(简体中文/CNY)</span>
				<p>更多选购方式，请<a href="">查找零售店</a>或<a href="">一加微信官方商城</a></p>
			</div>


			<!-- footer750   开始 -->
			<div class="cjddhz">
				<div class="footer-box1_750">
					<div class="box1-li_750">
						<p class="fbp_1">一加产品</p>
						<ul class="fbu_1">
							<li><a href="#">OnePlus 8 Pro</a></li>
							<li><a href="#">OnePlus 8</a></li>
							<li><a href="#">OnePlus 7T Pro</a></li>
							<li><a href="#">OnePlus 7T </a></li>
							<li><a href="#">OnePlus 7 Pro</a></li>
						</ul>
					</div>
					<div class="box1-li_750">
						<p class="fbp_2">热门活动</p>
						<ul class="fbu_2">
							<li><a href="#">推荐有礼</a></li>
							<li><a href="#">以旧换新</a></li>
							<li><a href="#">Shot on OnePlus</a></li>
							<li><a href="#">邀请码购买</a></li>
							<li><a href="#">教育优惠</a></li>
						</ul>
					</div>
					<div class="box1-li_750">
						<p class="fbp_3">关于一加</p>
						<ul class="fbu_3">
							<li><a href="#">了解一加</a></li>
							<li><a href="#">加入一加</a></li>
							<li><a href="#">H2OS</a></li>
							<li><a href="#">云服务</a></li>
							<li><a href="#">预置应用公示</a></li>
						</ul>
					</div>
					<div class="box1-li_750">
						<p class="fbp_4">服务支持</p>
						<ul class="fbu_4">
							<li><a href="#">购买帮助</a></li>
							<li><a href="#">用户手册</a></li>
							<li><a href="#">寄修服务</a></li>
							<li><a href="#">服务中心</a></li>
							<li><a href="#">联系我们</a></li>
						</ul>
					</div>
				</div>

				<!-- china750 -->
				<div class="china_750">
					<p><img src="img/china.png"><span>中国大陆(简体中文/CNY)</span></p>
				</div>
				<div class="relation_750">
					<p class="dh_750">电话:400-888-1111</p>
					<p class="p_span pf_span">
						<a href="http://www.sobot.com/chat/pc/index.html?sysNum=8b1ffba807764bc3bf2da878e5bb3df6" target="_blank" class="a3">在线客服</a>
						<a href="http://www.sobot.com/chat/pc/index.html?sysNum=8b1ffba807764bc3bf2da878e5bb3df6" target="_blank"><span>在线客服</span></a>
					</p>
					<p class="sj_750">周一至周日 9:00 - 22:00</p>
					<img class="imgs_750 imgss_750" src="img/vx.png">
					<a href="https://weibo.com/oneplusmobile?is_hot=1" target="_blank"><img class="imgs_750" src="img/WB.png"></a>
				</div>

				<div class="china_750_2">
					<p>更多选购方式，请<a href="">查找零售店</a>或<a href="">一加微信官方商城</a></p>
				</div>
			</div>
			<!-- footer750   结束 -->




			<!-- foot -->
			<div class="footEnds">
				<div class="footLeft">
					<p>© 2013-2019 OnePlus. All Rights Reserved.</p>
					<p class="left_p">粤ICP备13080605号-4 | 备案主体编号: 44201910955995</p>
					<p class="left_p2"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030402001407" target="_blank"><img
							 src="img/badge.png">粤公网安备 44030402001407号</a></p>
				</div>

				<div class="footRight">
					<ul>
						<li><a href="https://account.oneplus.com/cn/agreement_privacy?from=foot" target="_blank">隐私政策</a></li>
						<li><a href="https://account.oneplus.com/cn/agreement?from=foot" target="_blank">用户协议</a></li>
						<li><a href="https://account.oneplus.com/cn/terms-and-conditions?from=foot" target="_blank">竞赛规则</a></li>
						<li><a href="https://account.oneplus.com/cn/ip-policy?from=foot" target="_blank">知识产权政策</a></li>
						<li><a href="https://www.oneplus.com/cn/support/contact?from=foot" target="_blank">安全问题反馈</a></li>
						<li class="li_last"><a href="https://www.oneplus.com/cn/sitemap?from=foot" target="_blank">站点地图</a></li>
					</ul>
					<img src="img/cnnic.png">

					<a href="https://image01.oneplus.cn/shop/201811/13/1139/4ac3b42ccae6aa15de8ca8ce6df0140b.jpg" target="_blank"><img
						 src="img/dzyy.png"></a>
				</div>
			</div>



			<!-- foot 750     开始-->
			<div class="footEnds750">
				<div class="footRight750">
					<ul>
						<li><a href="https://account.oneplus.com/cn/agreement_privacy?from=foot" target="_blank">隐私政策</a></li>
						<li><a href="https://account.oneplus.com/cn/agreement?from=foot" target="_blank">用户协议</a></li>
						<li><a href="https://account.oneplus.com/cn/terms-and-conditions?from=foot" target="_blank">竞赛规则</a></li>
						<li><a href="https://account.oneplus.com/cn/ip-policy?from=foot" target="_blank">知识产权政策</a></li>
						<li><a href="https://www.oneplus.com/cn/support/contact?from=foot" target="_blank">安全问题反馈</a></li>
						<li class="li_last"><a href="https://www.oneplus.com/cn/sitemap?from=foot" target="_blank">站点地图</a></li>
					</ul>
				</div>
				<div class="footLeft750">
					<p class="left_p750">粤ICP备13080605号-4 | 备案主体编号: 44201910955995</p>
					<p class="left_p2750"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030402001407" target="_blank"><img
							 src="img/badge.png">粤公网安备 44030402001407号</a></p>

					<div class="img750">
						<a href="https://image01.oneplus.cn/shop/201811/13/1139/4ac3b42ccae6aa15de8ca8ce6df0140b.jpg" target="_blank"><img
							 src="img/dzyy.png"></a>
						<img src="img/cnnic.png">
					</div>
					<div class="p750s">
						<p>© 2013-2019 OnePlus. All Rights Reserved.</p>
					</div>
				</div>
			</div>
			<!-- foot 750    结束-->

		</div>
	</body>
</html>
<script src="js/jQuery.js" type="text/javascript" charset="utf-8"></script>
<script src="js/index.js" type="text/javascript" charset="utf-8"></script>
<script src="js/shoppingTrolley.js" type="text/javascript" charset="utf-8"></script>
<script src="js/payment.js" type="text/javascript" charset="utf-8"></script>
<script>
	let p = new Car();
	p.bindEvent();

	// 包裹所有商品的大盒子
	var goodsList = document.getElementsByClassName('goods_list')[0];
	// 模拟json数据
	var arr = [{
			"goodId": "1",
			"imgSrc": "img/gwc01.png",
			"price": "599.00",
			"title": "一加云耳2 黑色"
		},
		{
			"goodId": "2",
			"imgSrc": "img/gwc02.png",
			"price": "199.00",
			"title": "一加银耳 2T 黑色"
		},
		{
			"goodId": "3",
			"imgSrc": "img/gwc03.png",
			"price": "109.00",
			"title": "一加Warp 闪充数据线"
		},
		{
			"goodId": "4",
			"imgSrc": "img/gwc04.png",
			"price": "139.00",
			"title": "OnePlus Type—C转3.5mm转接线"
		}
	]
	// 循环出每项数据
	for (var i = 0; i < arr.length; i++) {
		// console.log(arr[i]);
		// 大盒子里面的内容拼接出来所有的小盒子
		// 将对应的值改掉
		goodsList.innerHTML +=
			`
		<ul>
			<li>
				<img src="${arr[i].imgSrc}">
			</li>
			<li>
			￥<span>${arr[i].price}</span>
			</li>
			<li>
			${arr[i].title}
			</li>
			<li>
				<button class="addGoods">加入购物车</button>
				<span style="display: none;">${arr[i].goodId}</span>
			</li>
		</ul>		
	`
	}
	// 获取到所有的添加按钮
	var addBtn = document.getElementsByClassName('addGoods');
	// 定义一个存放数据的空数组
	var saveArr = [];
	// 循环出所有的加入购物车的按钮
	for (var j = 0; j < addBtn.length; j++) {
		// 给按钮添加点击事件
		addBtn[j].onclick = function() {
			var flag = false; // 表示原数组没有重复的
			// 每一个的图片路径
			var imgSrc = this.parentNode.previousElementSibling.previousElementSibling.previousElementSibling
				.firstElementChild.getAttribute('src');
			// 每一个的标题
			var title = this.parentNode.previousElementSibling.innerText;
			console.log(title);
			// 每一个的价格
			var price = this.parentNode.previousElementSibling.previousElementSibling.firstElementChild.innerHTML;
			// 每一个商品id  作为唯一的标识符
			var goodId = this.nextElementSibling.innerHTML;
			// 将小盒子的内容存在一个小对象中
			var obj = {
				"imgSrc": imgSrc,
				"title": title,
				"price": price, // 单价
				"totalPrice": price, // 总价
				"num": 1,
				"goodId": goodId
			}
			// console.log(saveArr);
			// console.log(JSON.stringify(saveArr));
			// 循环所有的即将要存的数据
			for (var x = 0; x < saveArr.length; x++) {
				// 判断当前要存的这个条数据在整个数据存在与否
				if (saveArr[x].goodId == goodId) { // 存在只做修改
					saveArr[x].num++; // 修改数量
					// 修改总价
					saveArr[x].totalPrice = saveArr[x].price * saveArr[x].num;
					flag = true; // 有重复的标记置为true
				}
			}
			// 没重复的直接push
			if (flag == false) {
				saveArr.push(obj);
			}
			//saveArr = [{},{},{}]
			// 将处理完的数据转成字符串存在localstorage
			localStorage.setItem('data', JSON.stringify(saveArr));
			alert('加入购物车成功');
			// myrefresh();//刷新页面
		}
	}

	// 点击刷新页面
	function myrefresh() {
		window.location.reload();
	}
</script>
